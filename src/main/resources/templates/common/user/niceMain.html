<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- b: 공통 -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/base/axios-conf.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/base/fa/css/all.css" />
    <link rel="stylesheet" href="/base/common.css" />
    <script type="text/babel" src="/base/component.js"></script>
    <!-- e: 공통 -->

	<script language='javascript'>
	window.name ="Parent_window";

    function setEncodeData(encodeData) {
        axios
            .post("/member/api/nice/result", {encodeData: encodeData})
            .then(
                response => { 
                    console.log(response.data);
                    cmmAlert("console log 확인하세요");
                }
            );
    }

	function fnPopup(){
		window.open('', 'popupChk', 'width=500, height=550, top=100, left=100, fullscreen=no, menubar=no, status=no, toolbar=no, titlebar=yes, location=no, scrollbar=no');
		document.form_chk.action = "https://nice.checkplus.co.kr/CheckPlusSafeModel/checkplus.cb";
		document.form_chk.target = "popupChk";
		document.form_chk.submit();
	}

    const successUrl = "http://localhost:8080/common/nice-success.html";
    const failUrl = "http://localhost:8080/common/nice-fail.html";
    axios.post("/member/api/nice/encdata", {successUrl: successUrl, failUrl: failUrl})
        .then(
            response => {
                console.log(response.data);
                $("#EncodeData").val(response.data.encData);
                $("#btn-click").show();
            }
        );
	</script>
</head>
<body>
	<!-- 본인인증 서비스 팝업을 호출하기 위해서는 다음과 같은 form이 필요합니다. -->
	<form name="form_chk" method="post">
		<input type="hidden" name="m" value="checkplusService"> <!-- 필수 데이타로, 누락하시면 안됩니다. -->
		<input id="EncodeData" type="hidden" name="EncodeData"> <!-- 위에서 업체정보를 암호화 한 데이타입니다. -->

		<a id="btn-click" href="javascript:fnPopup();" style="display: none;"> CheckPlus 안심본인인증 Click</a>
	</form>
</body>
</html>